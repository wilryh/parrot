# parrot

Parrot scales short text using canonical pivot analysis

## Example



```{r example}
library(stm)
library(dplyr)
library(parrot)

processed <- textProcessor(
    input_data$text,
    data.frame(input_data),
    removestopwords=T, lowercase=T, stem=F
    )
out <- prepDocuments(
    processed$documents, processed$vocab, processed$meta
    )

tdm <- doc_to_tdm_fast(out$documents)
tdm <- tdm[Matrix::rowSums(tdm) > 0,]

embeddings <- read_word_embeddings2(
    indata=out$vocab,
    ovefile = "path/to/O2M_overlap.txt"
    ## available here http://www.cis.uni-muenchen.de/~wenpeng/renamed-meta-emb.tar.gz
    )

scores <- scale_text(
    meta=out$meta,
    tdm=tdm,
    vocab=out$vocab,
    embedding_values=as.matrix(
        data.frame(embeddings[["meta"]]) %>% select(-word)
        )^(1),
    embedding_vocab=as.character(
        data.frame(embeddings[["meta"]])$word
        ),
    compress_full=FALSE,        #TRUE for small data sets
    n_dimension_compression=200,
    n_grams=F
    )

document_scores <- score_documents2(
    scores=scores, n_dimensions=10
    )

get_keywords(scores, n_dimensions=3, n_words=15)

with(document_scores, cor(sqrt(n_words), X1, use="complete"))

plot_keywords(
    scores, x_dimension=2, y_dimension=3, q_cutoff=0.9,
    unstretch=F
    )
```
